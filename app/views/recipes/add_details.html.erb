<link rel="stylesheet" href="//unpkg.com/iview/dist/styles/iview.css">

<div class="container">
  <h1 class="text-center"><strong><%= @recipe.title %><%= @recipe.id %></strong></h1>
  <div id="recipe_add_details">
    <div class="select-details">
      <!-- MEASURES -->
      <div class="recipe-measures">
        <ul v-for="measure in measures" id="measure-list">
          <div style="display: flex; justify-content: flex-start;">
            <a v-on:click="editMeasure(measure)"><i class="fa fa-pencil-square-o" aria-hidden="true"></i></a>
            <a v-on:click="destroyMeasure(measure)" style="margin: 0px 5px;"><i class="fa fa-trash-o" aria-hidden="true"></i></a>
            <p style="margin: 0px 5px;">|</p>
            <li>{{ measure.quantity }}{{ measure.text1 }}{{ measure.ingredient.name }}{{ measure.text2 }}</li>
          </div>
        </ul>
        <h4>Ajout des mesures</h4>
        <input v-model="newMeasure.quantity" type="integer" class="form-control" placeholder="Quantité" style="width:260px">
        <input v-model="newMeasure.text1" type="text" class="form-control" placeholder="Texte 1" style="width:260px">
        <template>
          <i-select v-model="newMeasure.ingredient.id" filterable style="width:260px">
            <i-option v-for="ingredient in ingredients" :value="ingredient.id" :key="ingredient.name">{{ ingredient.name }}</i-option>
          </i-select>
        </template>
        <input v-model="newMeasure.text2" type="text" class="form-control" placeholder="Texte 2 (optionel)" style="width:260px">
        <button v-on:click="createMeasure(newMeasure)" class="btn btn-sm btn-success" slot="content">Ajouter</button>
      </div>

      <!-- TAGS -->
      <div class="recipe-tags">
        <h4>Tags</h4>
        <template>
          <i-select v-model="selectedTags" multiple filterable style="width:260px">
            <i-option v-for="tag in tags" :value="tag.id" :key="tag.name">{{ tag.name }}</i-option>
          </i-select>
        </template>
        <button v-on:click="addTags(selectedTags)" class="btn btn-sm btn-info">Update</button>
      </div>

      <!-- TOOLS -->
      <div class="recipe-tools">
        <h4>Ustensiles</h4>
        <template>
          <i-select v-model="selectedTools" multiple filterable style="width:260px">
            <i-option v-for="tool in tools" :value="tool.id" :key="tool.name">{{ tool.name }}</i-option>
          </i-select>
        </template>
        <button v-on:click="addTools(selectedTools)" class="btn btn-sm btn-info">Update</button>
      </div>
    </div>

    <div class="create-details">
      <h4>Créer les élements manquants</h4>
      <collapse style="width:290px">
        <panel name="1">
          Ajouter un ingrédient
          <input v-model="newIngredient.name" type="text" slot="content" class="form-control" id="ingredientName" placeholder="Nom de l'ingrédient" style="width:260px">
          <input v-model="newIngredient.description" type="text" slot="content" class="form-control" id="ingredientDescription" placeholder="Description" style="width:260px">
          <button v-on:click="createIngredient(newIngredient)" class="btn btn-sm btn-success" slot="content">Ajouter</button>
        </panel>
        <panel name="2">
          Ajouter un tag
          <input v-model="newTag.name" type="text" slot="content" class="form-control" id="tagName" placeholder="Nom du tag" style="width:260px">
          <button v-on:click="createTag(newTag)" class="btn btn-sm btn-success" slot="content">Ajouter</button>
        </panel>
        <panel name="3">
          Ajouter un ustensil
          <input v-model="newTool.name" type="text" slot="content" class="form-control" id="toolName" placeholder="Nom de l'ustensil" style="width:260px">
          <button v-on:click="createTool(newTool)" class="btn btn-sm btn-success" slot="content">Ajouter</button>
        </panel>
      </collapse>
    </div>
  </div>
</div>

<% content_for :after_js do %>
  <%= javascript_pack_tag 'recipes' %>
<% end %>
